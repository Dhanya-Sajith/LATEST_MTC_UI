

<!-- Begin page -->
<div id="layout-wrapper">
     
    <app-header></app-header>

        <!-- ========== App Menu ========== -->
      
        <app-sidemenu></app-sidemenu>

        <!-- Left Sidebar End -->
        <!-- Vertical Overlay-->
        <div class="vertical-overlay"></div>

        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content" style="overflow-x: hidden;">
            <div class="page-content">
                <div class="container-fluid">
                    <!-- start page title -->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card mt-n4 mx-n4 mb-n5">
                                <div class="bg-info-subtle">
                                    <div class="card-body pb-4 mb-5">
                                        <div class="row">
                                            <div class="col-md">
                                                <div class="row align-items-center gy-2">
                                                    <div class="col-sm">
                                                    <div class="d-flex align-items-center ma-5">
                                                        <div class="flex-shrink-0">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-info-subtle">
                                                                    <img src="assets\styles\img\icons8-video-conference-100.png" alt="" class="img-130">
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="flex-grow-1 ms-2 ma-5">
                                                            <h2 class="fs-16 mb-1 font-type fw-semibold text-uppercase">Online Trainings</h2>
                                                        </div>
                                                    </div>
                                                    </div>
                                                    <div class="col-sm-auto">
                                                        <div class="flex-grow-1 ms-1 ">
                                                            <div class="page-title-right padding-up-5 pr-20">
                                                                <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                                                                    <a href="#"><button class="btn btn-blue btn-sm font-type fs-13 font-type text-white h-30" data-bs-toggle="modal" id="AddRequestModalTeam-btn" data-bs-target="#AddRequestModal"><i class="ri-file-add-line align-bottom me-1"></i>Add Trainings</button></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                </div>
                                                <!--end row-->
                                            </div>
                                        </div>
                                        <!--end row-->
                                    </div><!-- end card body -->
                            </div>
                        </div><!-- end card -->
                    </div>

                    <div class="row topbar-up">
                        <div class="col-md-12 col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                            <div class="row topbar-up mb-2">
                                                <div class="col-lg-12 bg-warning-subtle">
                                                        <div class="pa-6-8 mb-3">
                                                            <div class="row align-items-center gy-3">
                                                                <div class="col-sm">
                                                                    <div class="d-flex gap-1 flex-wrap">
                                                                        <!-- <div class="search-box">
                                                                            <input type="text" class="form-control search h-30 textbox-15 font-type" placeholder="Search...">
                                                                            <i class="ri-search-line search-icon"></i>
                                                                        </div> -->
                                                                        <div class="search-box me-2 mb-2 d-inline-block">
                                                                            <div class="position-relative">
                                                                                <input type="text" class="form-control searchInput"  id="searchInput" style="width: 245px;" [(ngModel)]="searchInput"  name="searchInput" placeholder="Search..." aria-label="search" aria-describedby="search_icon">
                                                                                <i class="ri-search-line search-icon"></i>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-sm-3">
                                                                            <select class="form-select font-type fs-12 textbox-15 h-30" id="company" name="company" (change)="fetchOnlineTrainingsFilter()">
                                                                                <option value ="-1">Company Name</option>
                                                                                <option  *ngFor="let CompanyList of listaccesscompany" value="{{CompanyList.KEY_ID}}" >
                                                                                    {{CompanyList.DATA_VALUE}}
                                                                                </option>
                                                                              </select> 
                                                                        </div>
                                                                        <div>
                                                                            <select class="form-select h-30 font-type textbox-15" id="year" name="year" (change)="fetchOnlineTrainingsFilter()">
                                                                                <option value ="-1">Select Year</option>
                                                                                <option  *ngFor="let yrlist of yearlist" value="{{yrlist.DISPLAY_FIELD}}">
                                                                                    {{yrlist.DISPLAY_FIELD}} 
                                                                                </option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>
                                            </div>

                                                 <!--TABLE-->
                                                <div class="row margin-up-5">
                                                    <div class="col-lg-12">
                                                        <div class="table-responsive table-card mb-0">
                                                                <table class="table table-nowrap align-middle table-bordered border-orange table-hover" id="table2">
                                                                    <thead class="font-type table-light text-white">
                                                                    <tr class="text-center">
                                                                        <th>SL NO</th>
                                                                        <th>Areas</th>
                                                                        <th>Training Name</th>
                                                                        <th>Duration</th>
                                                                        <th class="bg-blue fs-12 font-type" width="15%">Employee</th>
                                                                        <!-- <th>Assigned<br> Hours</th> -->
                                                                        <!-- <th>Pending<br> Hours</th> -->
                                                                        <th>Target Date</th>
                                                                        <th>Remarks</th>
                                                                        <th>Action</th>
                                                                    </tr>   
                                                                </thead>
                                                                <tbody class="list form-check-all font-type fs-11">
                                                                    <ng-container *ngFor="let onlinetraining of listTrainings | search : searchInput | pagination: currentPage: itemsPerPage; let i=index">
                                                                        <tr class="font-type"  *ngFor="let trdtls of onlinetraining.Employees; let isFirst = first">
                                                                            <ng-container *ngIf="isFirst">
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length"class="fw-semibold">{{onlinetraining.PLAN_ID}}</td>
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length" style="white-space: pre-wrap;">{{onlinetraining.AREA_NAME}}</td>
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length" style="white-space: pre-wrap;">{{onlinetraining.SUBJECT_NAME}}</td>
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length" style="white-space: pre-wrap;">{{onlinetraining.LOCATION}}</td>
                                                                                <td class="p-1">{{trdtls.EMP_NAME}}</td>
                                                                                <!-- <td class="p-1">{{trdtls.ASSIGNED_HOURS}}</td> -->
                                                                                <!-- <td class="p-1">{{trdtls.PENDING_HOURS}}</td> -->
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length">{{onlinetraining.EXPIRY_DATE | date: 'dd-MM-yyyy'}}</td>
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length" style="white-space: pre-wrap;">{{onlinetraining.REMARKS}}</td>
                                                                                <td [attr.rowspan]="onlinetraining.Employees.length" class="">
                                                                                    <ng-container [ngSwitch]="true">
                                                                                        <div *ngSwitchCase="onlinetraining.PLAN_STATUS == '1'">
                                                                                            <ul class="list-inline hstack gap-0 mb-0" style="justify-content: center;">
                                                                                                <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Cancel Training">
                                                                                                    <a class="d-inline-block text-center" data-bs-toggle="modal" href="#MsgModal" (click)="cancelonlineTraining(onlinetraining.PLAN_ID)">
                                                                                                    <i class="ri-close-circle-fill fs-24 text-danger text-center"></i>
                                                                                                    </a>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                        <div *ngSwitchCase="onlinetraining.PLAN_STATUS == '6'">
                                                                                            <span class="badge bg-danger text-white  width-budge fs-11 fw-medium">Cancelled</span>
                                                                                        </div>
                                                                                    </ng-container>
                                                                                    
                                                                                </td>
                                                                            </ng-container>
                                                                            <ng-container *ngIf="!isFirst">
                                                                                <td class="p-1">{{trdtls.EMP_NAME}}</td>
                                                                                <!-- <td class="p-1">{{trdtls.ASSIGNED_HOURS}}</td> -->
                                                                                <!-- <td class="p-1">{{trdtls.PENDING_HOURS}}</td> -->
                                                                            </ng-container>
            
                                                                        </tr>
                                                                    </ng-container>                                    
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        
                                                        <div *ngIf="listTrainings">
                                                            <div class="align-items-center justify-content-between row text-center text-sm-start" *ngIf="totalSearchResults>0">
                                                                <div class="col-sm">
                                                                  <div class="font-type fs-12 text-muted">
                                                                    Showing <span class="fw-semibold">{{ getEntriesStart() }}</span>
                                                                    - <span class="fw-semibold">{{ getEntriesEnd() }}</span>
                                                                    of <span class="fw-semibold">{{ totalSearchResults }}</span> Results
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm">
                                                                    <div class="font-type fs-12 text-muted">
                                                                        Total Pages : <span class="fw-semibold"> {{ getTotalPages() }}</span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-auto mt-4 mt-sm-0">
                                                                    <div class="d-flex gap-1 flex-wrap">
                                                                        <div>
                                                                            <div class="input-group">
                                                                    <input type="number" class="form-control h-20 font-type" style="width:100px" aria-describedby="button-addon2" placeholder="Go to Page" [(ngModel)]="desiredPage" tabindex="1">                                                                    
                                                                    
                                                                   <button class="btn btn-orange text-white font-type fs-12 h-20" type="button" id="button-addon2"(click)="goToPage()" tabindex="2">Go</button>
                                                              </div>
                                                            </div>
                                                                 
                                                                <div class="col-sm-auto mt-3 mt-sm-0">
                                                                  <ul class="pagination pagination-separated pagination-sm mb-0 justify-content-center">
                                                                    <li class="page-item">
                                                                      <button class="page-link" (click)="changePage(currentPage - 1)" [class.disabled-button]="currentPage === 1">←</button>
                                                                    </li>
                                                                    <ng-container *ngFor="let pageNumber of getPageNumbers(currentPage)">
                                                                      <li class="page-item">
                                                                        <button class="page-link" (click)="changePage(pageNumber)" [class.active]="currentPage === pageNumber">{{ pageNumber }}</button>
                                                                      </li>
                                                                    </ng-container>
                                                                    <li class="page-item">
                                                                      <button class="page-link" (click)="changePage(currentPage + 1)" [class.disabled-button]="currentPage * itemsPerPage >= totalSearchResults">→</button>
                                                                    </li>
                                                                  </ul>
                                                                </div>
                                                              </div>
                                                            </div>
                                                        </div>
                                            </div>

                                                        <!--END PROPOSED TABLE PLANNER-->
                                                </div><!--end col-->
                                                </div>
                                        <!-- END TABLE -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- container-fluid -->   
            </div>
                <!-- End Page-content -->

                  <!--Add Training Model Team-->
                  <div class="modal fade zoomIn " id="AddRequestModal" tabindex="-1" aria-labelledby="AddRequestModal" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-orange padding-up-5">
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
                            </div>
                            <form class="tablelist-form" autocomplete="off" [formGroup]="OnlinAddForm" (ngSubmit)="OnlinFormSubmit()">
                                <div class="modal-body">
                                    <input type="hidden" id="id-field" />
                                    <div class="row mb-3">
                                            <div class="col-lg-2">
                                                <h6 class="fs-12 font-type fw-semibold"><span>Areas </span></h6>
                                            </div>
                                            <div class="col-lg-10">
                                                <div class="div-space">
                                                    <select class="form-select h-30 fs-12 font-type textbox-15" id="areanm" name="areanm" #areanm formControlName="areanm"  (change)="newfield(trainingname.value,areanm.value);">
                                                        <option value="">Select</option>
                                                        <option *ngFor="let area of listarea" value="{{area.KEY_ID}}"> {{area.DATA_VALUE}}</option>
                                                    </select>
                                                    <div *ngIf="OnlinAddForm.get('areanm')!.hasError('required') && OnlinAddForm.get('areanm')!.touched" class="text-danger">Please select the area</div>
                                                    <!-- <input type="text" name="areas" id="areas" class="form-control text-space font-type" placeholder="Type / Select Area" onfocus="this.select()">
                                                    <input name="areasValue" id="areasValue"  type="hidden" > -->
                                                  </div>
                                            </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Training Name </span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                            <div class="div-space">
                                                <select class="form-select h-30 fs-12 font-type textbox-15" id="trainingname" name="trainingname" #trainingname formControlName="trainingname" (change)="newfield(trainingname.value,areanm.value);">
                                                    <option value="">Select</option>
                                                    <option *ngFor="let training of listtraining" value="{{training.VALUE_FIELD}}">{{training.DISPLAY_FIELD}}</option>
                                                    <option value="-1" style="background-color: red;" >Add New Training</option>
                                                </select>
                                                <div *ngIf="OnlinAddForm.get('trainingname')!.hasError('required') && OnlinAddForm.get('trainingname')!.touched" class="text-danger">Please select the training name</div>
                                                <!-- <input type="text" name="trainingname" id="trainingname" class="form-control text-space font-type" placeholder="Type / Select Training Name" onfocus="this.select()" onchange=""> -->
                                                <!-- <input name="trainingValue" id="trainingValue" type="hidden"> -->
                                              </div>
                                        </div>
                                        
                                        
                                    </div>
                                    <div class="row mb-3" *ngIf="this.fieldflag==1">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span></span></h6>
                                        </div>
                                        <div class="col-lg-6">
                                            <input type="text" class="form-control font-type textbox-15" placeholder="Enter the Link" id="newtrainingname" name="newtrainingname" #newtraining placeholder="Enter Training Name"> 
                                        </div>
                                        <div class="col-lg-2">
                                            <a (click)="addnrewtraining(newtraining.value)" ><i class="ri-add-circle-line fs-24 text-success" title="Add New Training Subject"></i></a>
                                        </div>
                                    </div>
                                    <div class="row mb-3" *ngIf="viewsts==1">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Old Link / Old Video</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                                <input type="text" class="form-control font-type textbox-15 bg-light" placeholder="Enter the Link" id="oldvideo_path" name="oldvideo_path" [formControl]="oldvideo_path" readonly> 
                                                <!-- <div *ngIf="OnlinAddForm.get('video_path')!.hasError('required') && OnlinAddForm.get('video_path')!.touched" class="text-danger">Please select the training name</div> -->
                                                <input class="form-control font-type fs-12 textbox-15 ma-10 bg-light" type="text" id="olddoc_path"  name="olddoc_path" [formControl]="olddoc_path" readonly>    
                                                <!-- <div *ngIf="OnlinAddForm.get('doc_path')!.hasError('required') && OnlinAddForm.get('doc_path')!.touched" class="text-danger">Please select the training name</div>       -->
                                        </div>
                                    </div>
                                    
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Link / Videos</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                                <input type="text" class="form-control font-type textbox-15" placeholder="Enter the Link" id="video_path" name="video_path" formControlName="video_path"> 
                                                <!-- <div *ngIf="OnlinAddForm.get('video_path')!.hasError('required') && OnlinAddForm.get('video_path')!.touched" class="text-danger">Please select the training name</div> -->
                                                <input class="form-control font-type fs-12 textbox-15 ma-10" type="file" id="doc_path"  name="doc_path" formControlName="doc_path">    
                                                <!-- <div *ngIf="OnlinAddForm.get('doc_path')!.hasError('required') && OnlinAddForm.get('doc_path')!.touched" class="text-danger">Please select the training name</div>       -->
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Duration</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                            <input type="text" class="form-control font-type fs-11 mb-0 textbox-15" id="duration" name="duration" formControlName="duration">  
                                            <div *ngIf="OnlinAddForm.get('duration')!.hasError('required') && OnlinAddForm.get('duration')!.touched" class="text-danger">Please enter duration</div>  
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Employee</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                            <!-- <h6 class="fs-12 font-type fw-semibold"><span>Employee</span></h6> -->
                                            <ng-multiselect-dropdown #dropdown
                                                [settings]="dropdownSettings"
                                                formControlName="hemployee"
                                                [data]="listEmployee">     
                                            </ng-multiselect-dropdown>  
                                            <div *ngIf="OnlinAddForm.get('hemployee')!.hasError('required') && OnlinAddForm.get('hemployee')!.touched" class="text-danger">Please select the employee name</div>            
                                        </div>
                                        
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Target Date</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                            <input type="date" class="form-control font-type fs-11 mb-0 textbox-15" id="targetdate" name="targetdate" formControlName="targetdate">  
                                            <div *ngIf="OnlinAddForm.get('targetdate')!.hasError('required') && OnlinAddForm.get('targetdate')!.touched" class="text-danger">Please enter target date</div>  
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-lg-2">
                                            <h6 class="fs-12 font-type fw-semibold"><span>Remarks</span></h6>
                                        </div>
                                        <div class="col-lg-10">
                                            <textarea class="form-control textbox-15" id="remarks" name="remarks" formControlName="remarks"></textarea>  
                                            <div *ngIf="OnlinAddForm.get('remarks')!.hasError('required') && OnlinAddForm.get('remarks')!.touched" class="text-danger">Please enter remarks</div>  
                                        </div>
                                    </div>
                                    <div class="col-lg-12 pt-2">
                                            <div class="hstack gap-2 justify-content-end">
                                            <button type="button" class="btn btn-orange btn-label right ms-auto nexttab nexttab font-type " (click)="Onlinetrsubmit()" ><i class="ri-add-line label-icon align-middle fs-16 ms-2"></i>Save</button>
                                            <button type="button" class="btn btn-blue btn-label right  nexttab  nexttab font-type " (click)="hClear()"><i class="ri-close-circle-line label-icon align-middle fs-16 ms-2"></i>Cancel</button>
                                            </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                  </div> 
                 <!--End Training Modal Team-->
                             
                <!-- Message-->
                  <div class="modal fade zoomIn" id="MsgModal" tabindex="-1" aria-labelledby="MsgModal" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header bg-orange padding-up-5">
                                <button type="button" class="btn-close" id="deleteRecord-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <div class="text-center">
                                    <h5 class="fs-13 font-type">You cannot undo this action ?</h5>
                                    <p class="text-muted fs-12 mb-2 pt-1 font-type">Do you want to continue?</p>
                                    <div class="hstack gap-2 justify-content-center remove">   
                                        <button class="btn btn-success font-type"  id="deleteRecord-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close">No, Go back!</button>
                                        <button class="btn btn-danger font-type" (click)="confirmCancelTraining(this.trainingId)">Yes, Continue</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                <!--End Message-->

                 <!-- success model -->

 <button id="openModalButtonForalertsuccess"  [hidden]="true" data-bs-toggle="modal" data-bs-target="#SuRecordModals">Open Modal</button>
  
 <div class="modal fade zoomIn" id="SuRecordModals" tabindex="-1" aria-labelledby="SaveModal" aria-hidden="true">
     <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content">
             <div class="modal-header bg-orange padding-up-5">
                 <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
             </div>
             <div class="modal-body text-center padding-down-5"  *ngIf="showModals==1">
                 
                 <div class="text-center">
                     <h5 class="fs-13 font-type">{{successs}}</h5>
                 </div>
             </div>
             <div class="modal-body text-center padding-down-5"  *ngIf="showModals==2">
                 
                <div class="text-center">
                    <h5 class="fs-13 font-type">{{faileds}}</h5>
                </div>
            </div>
         </div>
     </div>
 </div>

                <app-footer></app-footer>
        </div>
        <!-- end main content-->
    </div>
    <!-- END layout-wrapper -->

 