 <!-- Begin page -->
 <div id="layout-wrapper">

    <app-header></app-header>
    <app-sidemenu></app-sidemenu>
    <!-- ========== App Menu ========== -->
    
   
        <!-- Vertical Overlay-->
        <div class="vertical-overlay"></div>

        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">
                    <!-- start page title -->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card mt-n4 mx-n4 mb-n5">
                                <div class="bg-light-blue">
                                    <div class="card-body pb-4 mb-5">
                                        <div class="row">
                                            <div class="col-md">
                                                <div class="row align-items-center">
                                                    <div class="d-flex align-items-center ma-5">
                                                        <div class="flex-shrink-0">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light-blue">
                                                                    <img src="assets\styles\img\icons8-leave-94.png" alt="" width="90%">
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="flex-grow-1 ms-1 ma-5">
                                                            <h2 class="fs-16 mb-1 font-type fw-semibold text-uppercase" style=" letter-spacing: 0.5px;">Leave Settings</h2>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--end row-->
                                            </div>
                                        </div>
                                        <!--end row-->
                                    </div><!-- end card body -->
                                </div>
                            </div><!-- end card -->
                        </div><!-- end col -->
                    </div>

                    <div class="row topbar-up">
                                <div class="col-md-12 col-lg-12">
                                    <div class="card">
                                        <div class="card-body">
                                           <div class="step-arrow-nav mt-n3 mx-n3 mb-3 margin-up-5 ">
                                                        <ul class="nav nav-pills nav-justified custom-nav " role="tablist">
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link fs-13 p-3 active font-type " id="pills-leave-info-tab" data-bs-toggle="pill" data-bs-target="#pills-leave-info" type="button" role="tab" aria-controls="pills-leave-info" aria-selected="true">
                                                                        <i class="ri-article-line fs-16 p-2 bg-primary-subtle text-blue rounded-circle align-middle me-2 font-type"></i>Leave Policy
                                                                    </button>
                                                                </li>
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link fs-13 p-3 font-type" id="pills-employees-tab" data-bs-toggle="pill" data-bs-target="#pills-employees" type="button" role="tab" aria-controls="pills-employees" aria-selected="false">
                                                                        <i class="ri-team-line fs-16 p-2 bg-primary-subtle text-blue rounded-circle align-middle me-2"></i> Employees Leave Account
                                                                    </button>
                                                                </li>
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link fs-13 p-3 font-type" id="pills-processing-tab" data-bs-toggle="pill" data-bs-target="#pills-processing" type="button" role="tab" aria-controls="pills-processing" aria-selected="false">
                                                                        <i class="ri-loop-left-line fs-16 p-2 bg-primary-subtle text-blue rounded-circle align-middle me-2"></i> Year End Processing
                                                                    </button>
                                                                </li>
                                                        </ul>
                                              </div> 
                
                                            <div class="tab-content">
                                                <div class="tab-pane fade show active" id="pills-leave-info" role="tabpanel" aria-labelledby="pills-leave-info-tab">
                                                    <div class=" border-0 mb-3">
                                                        <div class="row align-items-center gy-3">
                                                            <div class="col-sm">
                                                                <div class="d-flex align-items-center">
                                                                    <div class="flex-shrink-0">
                                                                        <img src="assets\styles\img\icons8-calendar-64.png" alt="" class="avatar-xs rounded">
                                                                    </div>
                                                                    <div class="flex-grow-1 ms-1 ma-5">
                                                                        <h6 class="fs-15 mb-1 font-type fw-semibold">{{Year}}</h6>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-auto">
                                                                <select class="form-select h-30 font-type textbox-15" name="lvepolicyCmpny" id="lvepolicyCmpny" (change)="FetchLeavePolicyDetails()">
                                                                    <!-- <option value="">Company Name</option> -->
                                                                    <option  *ngFor="let CompanyList of listCompany" value="{{CompanyList.KEY_ID}}">
                                                                        {{CompanyList.DATA_VALUE}}    
                                                                    </option>
                                                                  </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>

                                                        <button type="button"  class="btn btn-success font-type fs-12 add-button text-white"  style="height:30px;width:150px;margin-top: 1px; margin-left: 80%;"data-bs-toggle="modal" id="create-btn" data-bs-target="#AddLeaveModal"><i class="fa fa-plus-circle" aria-hidden="true" style="font-size: 18px; margin-right:10%;"></i>Add New Leave</button>
                                                    </div>
                                                   <div>
                                                    <br>
                                                   </div>
                                                    <div class="shadow-lg">
                                                        <div class="live-preview">
                                                            <div class="table-responsive">
                                                                <table class="table align-middle table-nowrap mb-0 table-hover table-bordered border-orange" >
                                                                    <thead class="text-black font-type bg-orange text-white h-30">
                                                                        <tr class="font-type fs-12 fw-medium border-orange">
                                                                            <th class="fs-12">Leave Type</th>
                                                                            <th class="fs-12" hidden>Leave Type</th>
                                                                            <th class="fs-12">Quota</th>
                                                                            <th>Type of Leave</th>
                                                                            <th hidden>company code</th>
                                                                            <th>Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody class="font-type">
                                                                        <tr class="h-30" *ngFor="let cmpnyleavepolicy of listleavepolicy">
                                                                            <td>{{cmpnyleavepolicy.LEAVE_TYPE}}</td>
                                                                            <td hidden>{{cmpnyleavepolicy.LEAVE_TYPEID}}</td>
                                                                            <td>
                                                                                <ng-container *ngIf="cmpnyleavepolicy.isEditingPolicy" >
                                                                                    <input type="number" value=""   [(ngModel)]="cmpnyleavepolicy.permitteddays"/>                                                   
                                                                                   
                                                                                 </ng-container>
                                                                                 <ng-container *ngIf="!cmpnyleavepolicy.isEditingPolicy">
                                                                                   {{cmpnyleavepolicy.PERMITTED_DAYS}}
                                                                                 </ng-container>
                                                                            </td>
                                                                            <td>{{cmpnyleavepolicy.TYPE_OF_DAYS}}</td>
                                                                            <td hidden>{{cmpnyleavepolicy.COMPANY_CODE}}</td>
                                                                            <td>
                                                                                <ul class="list-inline hstack gap-2 mb-0">
                                                                                    <!-- <li class="list-inline-item edit" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Edit" >
                                                                                            <button class="btn btn-outline-warning btn-sm br_radius mr-2" (click)="Editquota(cmpnyleavepolicy)"  [disabled]="cmpnyleavepolicy.isEditingPolicy" [hidden]="cmpnyleavepolicy.isEditingPolicy" id = "isEditingPolicy" name = "isEditingPolicy" ><i class="fa fa-pencil-square-o ic_color" aria-hidden="true" style="font-size: 18px;"></i></button>
                                                                                    </li>
                                                                                    <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Cancel" >  
                                                                                        <button type="button" class="btn btn-danger btn-sm " id="buttoncancel" [hidden]="!cmpnyleavepolicy.isEditingPolicy" (click)="BacktoPolicyValues(cmpnyleavepolicy)"><i class="fa fa-times-circle-o" aria-hidden="true" style="font-size: 18px;" ></i></button>
                                                                                    </li>
                                                                                    <li class="list-inline-item">
                                                                                        <button type="button" class="btn btn-success font-type fs-12 add-button text-white" href="#SaveModal"  [hidden]="!cmpnyleavepolicy.isEditingPolicy" data-bs-toggle="modal"  style="height:30px;width:50px;margin-top: 1px;"  id = "buttonsave"(click)="savePolicyEditings(cmpnyleavepolicy)" ><i class="fa fa-save" aria-hidden="true" style="font-size: 18px;" ></i></button>
                                                                                    </li> -->
                                                                                    <li class="list-inline-item text" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Remove">
                                                                                        <a class="text-danger d-inline-block remove-item-btn" data-bs-toggle="modal" href="#CancelModal" (click)="setSelectedvalues(cmpnyleavepolicy.LEAVE_TYPEID,cmpnyleavepolicy.PERMITTED_DAYS,cmpnyleavepolicy.TYPE_OF_DAYS,cmpnyleavepolicy.COMPANY_CODE)">
                                                                                            <i class="ri-delete-bin-5-fill fs-16"></i>
                                                                                        </a>
                                                                                    </li>
                                                                                </ul>
                                                                            </td>
                                                                        </tr>
                                                                    
                                                                    </tbody>
                                                                </table>
                                                                <!-- end table -->
                                                            </div>
                                                            <!-- end table responsive -->
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- end tab pane -->
                
                                                <div class="tab-pane fade" id="pills-employees" role="tabpanel" aria-labelledby="pills-employees-tab">
                                                    <div class=" border-0 mb-3">
                                                        <div class="row align-items-center gy-3">
                                                            <div class="col-sm">
                                                                <div class="d-flex align-items-center">
                                                                    <div class="flex-shrink-0">
                                                                        <img src="assets\styles\img\icons8-calendar-64.png" alt="" class="avatar-xs rounded">
                                                                    </div>
                                                                    <div class="flex-grow-1 ms-1 ma-5">
                                                                        <h6 class="fs-15 mb-1 font-type fw-semibold">{{Years}}</h6>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-auto">
                                                                <div class="d-flex gap-1 flex-wrap">
                                                                    <div class="">
                                                                        <select class="form-select h-30 font-type textbox-15" name="empleave" id="empleave"  [(ngModel)]="empleave" (change)="FetchEmployeeAnnualLeaveData()">
                                                                            <option  *ngFor="let listleave of listleaves" value="{{listleave.KEY_ID}}">
                                                                                {{listleave.DATA_VALUE}}
                                                                            </option> 
                                                                        </select>
                                                                    </div>
                                                                    <div class="">
                                                                        <select class="form-select h-30 font-type textbox-15" name="employeeCmpny" id="employeeCmpny"  [(ngModel)]="empcompany" (change)="FetchEmployeeAnnualLeaveData()">
                                                                            <option  *ngFor="let CompanyList of listCompany" value="{{CompanyList.KEY_ID}}">
                                                                                {{CompanyList.DATA_VALUE}}
                                                                            </option> 
                                                                        </select>
                                                                    </div>
                                                                   
                                                                    
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>

                                                    <div class="shadow-lg">
                                                        <div class="live-preview">
                                                            <div class="table-responsive mb-3">
                                                                <table class="table align-middle table-nowrap mb-0 table-hover table-bordered border-orange">
                                                                    <thead class="text-black font-type bg-orange text-white h-30">
                                                                        <tr class="font-type fs-12 fw-medium border-orange">
                                                                            <th class="fs-12">Emp ID</th>
                                                                            <th class="fs-12">Emp Name</th>
                                                                            <th hidden>leave Type</th>
                                                                            <th>Yearly Leave</th>
                                                                            <th *ngIf="empleave == 10">Carry forwared Leave</th>
                                                                            <th *ngIf="empleave == 10">Advance Leave</th>
                                                                            <th>Availed Leave</th>
                                                                            <th>Current Balance</th>
                                                                            <th *ngIf="empleave == 10">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody class="font-type">
                                                                        <tr class="h-30" *ngFor="let Employeeleave of listemployeelvedata | search : searchInput | pagination: currentPage: itemsPerPage;index as i" >
                                                                            <td >{{Employeeleave.KEY_ID}}</td>
                                                                            <td>{{Employeeleave.DATA_VALUE}}</td>
                                                                            <td hidden>{{Employeeleave.LEAVE_TYPE}}</td>
                                                                            <td>
                                                                                <ng-container *ngIf="Employeeleave.isEditing">
                                                                                   <ng-container *ngIf="this.company_code == 'MH'">
                                                                                    <i class="fa fa-plus-circle" aria-hidden="true" style="font-size: 18px;" data-bs-toggle="modal" data-bs-target="#YearlyLeaveHAFZAModal" [hidden]="!Employeeleave.isEditing"  [hidden]="Employeeleave.isYearlyclicked" (click)="FetchYearlyDays(Employeeleave)"></i>
                                                                                    
                                                                                    <input type="number" value="Employeeleave.yearlyleave"  [(ngModel)]="Employeeleave.yearlyleave" [hidden]="!Employeeleave.isYearlyclicked" readonly/>                                                    
                                                                                   </ng-container>
                                                                                 </ng-container>
                                                                                 <ng-container *ngIf="!Employeeleave.isEditing || this.company_code != 'MH'">
                                                                                   {{Employeeleave.YEARLY_LEAVE}}
                                                                                 </ng-container>
                                                                            </td>
                                                                            <td *ngIf="empleave == 10">
                                                                                <ng-container *ngIf="Employeeleave.isEditing" >
                                                                                    <input type="number" value=""   [(ngModel)]="Employeeleave.carryleave"/>                                                   
                                                                                   
                                                                                 </ng-container>
                                                                                 <ng-container *ngIf="!Employeeleave.isEditing">
                                                                                   {{Employeeleave.CARRY_FORWARDED}}
                                                                                 </ng-container>
                                                                                
                                                                              </td>
                                                                            <td style="text-align: center;" *ngIf="empleave == 10">
                                                                                <ng-container *ngIf="Employeeleave.isEditing">
                                                                                    <ng-container *ngIf="this.company_code != 'MH'">
                                                                                    <i class="fa fa-plus-circle" aria-hidden="true" style="font-size: 18px;" [hidden]="!Employeeleave.isEditing"  [hidden]="Employeeleave.isclicked" (click)="FetchPermittedDays(Employeeleave)"></i>
                                                                                    
                                                                                    <input type="number" value="Employeeleave.advncelve"   [(ngModel)]="Employeeleave.advncelve" [hidden]="!Employeeleave.isclicked" readonly/>                                                   
                                                                                   </ng-container>
                                                                                   <ng-container *ngIf="this.company_code == 'MH'">
                                                                                    <i class="fa fa-plus-circle" aria-hidden="true" style="font-size: 18px;" data-bs-toggle="modal" data-bs-target="#AddLeaveHAFZAModal" [hidden]="!Employeeleave.isEditing"  [hidden]="Employeeleave.isclicked" (click)="FetchAdvanceLeave(Employeeleave)"></i>
                                                                                    
                                                                                    <input type="number"  value="Employeeleave.advncelve"  [(ngModel)]="Employeeleave.advncelve"  [hidden]="!Employeeleave.isclicked" readonly/>                                                   
                                                                                   </ng-container>
                                                                                 </ng-container>
                                                                                 <ng-container *ngIf="!Employeeleave.isEditing">
                                                                                   {{Employeeleave.ADVANCE_LEAVE}}
                                                                                 </ng-container>

                                                                              </td>
                                                                            <td>{{Employeeleave.AVAILED_LEAVES}}</td>
                                                                            <td>{{Employeeleave.CURRENTBALANCE}}</td>
                                                                            <td *ngIf="empleave == 10">
                                                                                <ul class="list-inline hstack gap-2 mb-0">
                                                                                    <li class="list-inline-item edit" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Edit" >
                                                                                            <button class="btn btn-outline-warning btn-sm br_radius mr-2" (click)="Edit(Employeeleave)"  [disabled]="Employeeleave.isEditing" [hidden]="Employeeleave.isEditing" id = "isEditing" name = "isEditing" ><i class="fa fa-pencil-square-o ic_color" aria-hidden="true" style="font-size: 18px;"></i></button>
                                                                                    </li>
                                                                                    <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Cancel" >  
                                                                                        <button type="button" class="btn btn-danger btn-sm " id="buttoncancel" [hidden]="!Employeeleave.isEditing" (click)="BacktoValues(Employeeleave)"><i class="fa fa-times-circle-o" aria-hidden="true" style="font-size: 18px;" ></i></button>
                                                                                    </li>
                                                                                    <li class="list-inline-item">
                                                                                        <button type="button" class="btn btn-success font-type fs-12 add-button text-white" href="#SaveModal" data-bs-toggle="modal"  style="height:30px;width:50px;margin-top: 1px;"  id = "buttonsave"(click)="saveEditings(Employeeleave)"  [disabled]="!Employeeleave.isEditing"  ><i class="fa fa-save" aria-hidden="true" style="font-size: 18px;" ></i></button>
                                                                                    </li>
                                                                                </ul>
                                                                            </td>
                                                                        </tr>
                                                                        
                                                                        
                                                                        
                                                                    </tbody>
                                                                </table>
                                                                <!-- end table -->
                                                            </div>
                                                           
                                                            <!-- end table responsive -->
                                                        </div>
                                                    </div>
                                                    <div *ngIf="listemployeelvedata">
                                                    <div class="align-items-center justify-content-between row text-center text-sm-start"*ngIf="totalSearchResults>0">
                                                        <div class="col-sm">
                                                          <div class="font-type fs-12 text-muted">
                                                            Showing <span class="fw-semibold">{{ getEntriesStart() }}</span>
                                                            - <span class="fw-semibold">{{ getEntriesEnd() }}</span>
                                                            of <span class="fw-semibold">{{ totalSearchResults }}</span> Results
                                                          </div>
                                                        </div>
                                                        <div class="col-sm">
                                                            <div class="font-type fs-12 text-muted">
                                                                Total Pages : <span class="fw-semibold"> {{ getTotalPages() }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-auto mt-4 mt-sm-0">
                                                            <div class="d-flex gap-1 flex-wrap">
                                                                <div>
                                                                    <div class="input-group">
                                                            <input type="number" class="form-control h-20 font-type" style="width:100px" aria-describedby="button-addon2" placeholder="Go to Page" [(ngModel)]="desiredPage" tabindex="1">                                                                    
                                                            
                                                           <button class="btn btn-orange text-white font-type fs-12 h-20" type="button" id="button-addon2"(click)="goToPage()" tabindex="2">Go</button>
                                                      </div>
                                                    </div>
                                                         
                                                        <div class="col-sm-auto mt-3 mt-sm-0">
                                                          <ul class="pagination pagination-separated pagination-sm mb-0 justify-content-center">
                                                            <li class="page-item">
                                                              <button class="page-link" (click)="changePage(currentPage - 1)" [class.disabled-button]="currentPage === 1">←</button>
                                                            </li>
                                                            <ng-container *ngFor="let pageNumber of getPageNumbers(currentPage)">
                                                              <li class="page-item">
                                                                <button class="page-link" (click)="changePage(pageNumber)" [class.active]="currentPage === pageNumber">{{ pageNumber }}</button>
                                                              </li>
                                                            </ng-container>
                                                            <li class="page-item">
                                                              <button class="page-link" (click)="changePage(currentPage + 1)" [class.disabled-button]="currentPage * itemsPerPage >= totalSearchResults">→</button>
                                                            </li>
                                                          </ul>
                                                        </div>
                                                      </div>
                                            </div>
                                        </div>
                                                </div>

                                                </div>
                                                            <!-- end tab pane -->
                
                                                <div class="tab-pane fade" id="pills-processing" role="tabpanel" aria-labelledby="pills-processing-tab">
                                                <div class="row">
                                                        <div class="col-lg-12">
                                                                                    <div class="row g-3 margin-up-7 mb-3">
                                                                                        <div class="col-lg-6 col-md-3">
                                                                                            <select class="form-select h-30 font-type textbox-15" id = "YrEndProCmpny" name="YrEndProCmpny" (change)="FetchLeaveProcessingHistoryFilter()">
                                                                                                <option value="-1">Company Name</option>
                                                                                                <option  *ngFor="let CompanyList of listCompany" value="{{CompanyList.KEY_ID}}">
                                                                                                    {{CompanyList.DATA_VALUE}}
                                                                                                </option>
                                                                                              </select>
                                                                                        </div>
                                                                                        <div class="col-lg-3 col-md-3">
                                                                                            <div class="">
                                                                                                <select class="form-select h-30 font-type textbox-15" id = "YrEndProYear" name="YrEndProYear" (change)="FetchLeaveProcessingHistoryFilter()">
                                                                                                    <option value="-1">Year Ends</option>
                                                                                                    <option *ngFor="let YearList of listYear" value="{{YearList.DISPLAY_FIELD}}">
                                                                                                        {{YearList.DISPLAY_FIELD}}</option>
                                                                                                  </select>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-lg-3 col-md-3">
                                                                                            <div class="">
                                                                                                <select class="form-select h-30 font-type textbox-15" id = "YrEndProStatus" name="YrEndProStatus" (change)="FetchLeaveProcessingHistoryFilter()">
                                                                                                    <option value="-1">Status</option>
                                                                                                    <option value="0">All</option>
                                                                                                    <option *ngFor="let StatusList of listStatus" value="{{StatusList.KEY_ID}}">
                                                                                                        {{StatusList.DATA_VALUE}}</option>
                                                                                                  </select>
                                                                                            </div>
                                                                                        </div>
                                                                                        <!--end col-->
                                                                                    </div>
                                                                                    <!--end row-->
                                                                             
                                                                            <div class=" shadow-lg">
                                                                                <div class="live-preview">
                                                                                    <div class="table-responsive">
                                                                                        <table class="table align-middle table-nowrap mb-0 table-hover border-orange">
                                                                                            <thead class="text-black font-type bg-orange text-white">
                                                                                                <tr class="font-type fs-12 fw-medium border-orange">
                                                                                                    <th class="fs-12">Company</th>
                                                                                                    <th class="fs-12">Year Ends</th>
                                                                                                    <th  Width="15%" class="fs-12">Employee Count</th>
                                                                                                    <th  class="fs-12">Status</th>
                                                                                                    <th  class="fs-12">Actions</th>
                                                                                                </tr>
                                                                                                <tr class="font-type fs-12 fw-medium border-blue">
                                                                                                    
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody class="font-type ">
                                                                                                <tr class="h1-50" *ngFor="let YearEndProcessHis of listleaveProcessHis">
                                                                                                    <td >{{YearEndProcessHis.COMPANY_NAME}}</td>
                                                                                                    <td>{{YearEndProcessHis.YEAR_ENDS}}</td>
                                                                                                    <td>{{YearEndProcessHis.EMP_COUNT}}</td>
                                                                                                    <td >{{YearEndProcessHis.PROCESS_STATUS_VAL}}
                                                                                                        <div *ngIf="YearEndProcessHis.PROCESS_STATUS_VAL === 'Processed'">
                                                                                                            <br>
                                                                                                            <h6 class="fs-12 font-type text-muted margin-up-5">Processed on {{YearEndProcessHis.PROCESS_DATE| date: 'dd-MM-yyyy'}}</h6>
                                                                                                            </div>
                                                                                                    </td>
                                                                                                    
                                                                                                    <td>
                                                                                                        <div *ngIf="YearEndProcessHis.PROCESS_STATUS_VAL === 'Processed';else NotProcessed">
                                                                                                            <a href="yearendleaveprocessing" class="nav-link" data-key="t-marketplace"> 
                                                                                                            <button type="button" class="btn btn-outline-success waves-effect waves-light" (click)="setLocalstorage(YearEndProcessHis.COMPANY_NAME,YearEndProcessHis.YEAR,YearEndProcessHis.COMPANY_ID)" >View Processing Results</button></a>
                                                                                                                
                                                                                                        </div>
                                                                                                        <ng-template #NotProcessed>
                                                                                                            <a href="#SaveModal" data-bs-toggle="modal">
                                                                                                            <button type="button" class="btn btn-outline-info waves-effect waves-light" (click)="StartProcess(YearEndProcessHis.COMPANY_ID,YearEndProcessHis.YEAR)">Begin Year End Process</button></a>
                                                                                                          </ng-template>

                                                                                                    </td>
                                                                                                </tr>
                                                                                                
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <!-- end table -->
                                                                                    </div>
                                                                                    <!-- end table responsive -->
                                                                                </div>
                                                                            </div>
                                                        </div>
                                                                    <!--end col-->
                                                </div>
                                                </div>
                                                            <!-- end tab pane -->
                                            </div>
                                                        <!-- end tab content -->
                                                 
                                            
                                        <!-- </div>
                                    </div>
                                </div> -->
                                <button id="openModalButton" [hidden]="true" data-bs-toggle="modal" data-bs-target="#SaveModal">Open Modal</button> 
                                <div class="modal fade zoomIn" id="SaveModal" tabindex="-1" aria-labelledby="SaveModal" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header bg-orange padding-up-5">
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
                                            </div>
                                            <div class="modal-body text-center padding-down-5" *ngIf="showModal==1">
                                                
                                                <div class="text-center">
                                                    <h5 class="bar-text fs-12 font-type">{{success}}</h5>
                                                     
                                                </div>
                                            </div>
                                            <div class="modal-body text-center padding-down-5" *ngIf="showModal==2">
                                                
                                                <div class="text-center">
                                                    <h5 class="bar-text fs-12 font-type">{{failed}}</h5>
                                                     
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--Cancel Request Model-->
                                <div class="modal fade zoomIn" id="CancelModal" tabindex="-1" aria-labelledby="CancelModal" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header bg-orange padding-up-5">
                                                <button type="button" class="btn-close" id="deleteRecord-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close"></button>
                                            </div>
                                            <div class="modal-body text-center">
                                                <div class="text-center">
                                                    <h5 class="fs-13 font-type">You are about to delete an entry ?</h5>
                                                    <p class="text-muted fs-12 mb-2 pt-1 font-type">Do you want to continue?</p>
                                                    <div class="hstack gap-2 justify-content-center remove">   
                                                        <button class="btn btn-success font-type" data-bs-dismiss="modal" aria-label="Close" id="btn-close">No, Go back!</button>
                                                        <button class="btn btn-danger font-type" (click)="DeletePolicy()" data-bs-toggle="modal" data-bs-target="#SaveModal">Yes, Continue</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Cancel Request Model-->

                                <!--Add Add leave Model-->
                                <div class="modal fade" id="AddLeaveHAFZAModal" tabindex="-1" aria-labelledby="AddLeaveHAFZAModal" aria-hidden="true">     
                                    <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header bg-orange padding-up-5">
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal" ></button>
                                        </div>
                                        <form class="tablelist-form" autocomplete="off">
                                            <div class="modal-body">
                                                <input type="hidden" id="id-field" />
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <h3 class="fw-semibold"><span>No.of Months Leave</span></h3>
                                                        <input type="number" class="form-control" name="HafzaMonth" [(ngModel)]="HafzaMonth" (change)="CheckVAlidation()" required>
                                                        <div *ngIf="errmsg" class="text-danger">{{errmsg}}</div>
                                                    </div>
                                                </div>
                                            </div>           
                                            <div class="modal-footer">
                                                <button type="submit" class="btn btn-orange font-type text-white" data-bs-toggle="modal" (click)="HafzaAddLeave(leavedata)">Update</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>                
                            <!-- End Add leave Model -->

                             <!--Add Add leave Model-->
                             <div class="modal fade" id="YearlyLeaveHAFZAModal" tabindex="-1" aria-labelledby="YearlyLeaveHAFZAModal" aria-hidden="true">     
                                <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header bg-orange padding-up-5">
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal" ></button>
                                    </div>
                                    <form class="tablelist-form" autocomplete="off">
                                        <div class="modal-body">
                                            <input type="hidden" id="id-field" />
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <h3 class="fw-semibold"><span>No.of Months Leave</span></h3>
                                                    <input type="number" class="form-control" name="HafzaYearlyMonth" [(ngModel)]="HafzaYearlyMonth" (change)="CheckYealryVAlidation()" required>
                                                    <div *ngIf="errmsg" class="text-danger">{{errmsg}}</div>
                                                </div>
                                            </div>
                                        </div>           
                                        <div class="modal-footer">
                                            <button type="submit" class="btn btn-orange font-type text-white" data-bs-toggle="modal" (click)="HafzaYearlyAddLeave(leavedata)">Update</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>                
                        <!-- End Add leave Model -->
                        
                    </div>
                </div>
                <!-- container-fluid -->
            </div>
            <!-- End Page-content -->

                
        </div>
        <!-- end main content-->
        <app-footer></app-footer>
    </div>
    </div>
    <!-- END layout-wrapper -->
                       <!--Add Add leave Model-->
                       <div class="modal fade" id="AddLeaveModal" tabindex="-1" aria-labelledby="AddLeaveModal" aria-hidden="true">     
                        <div class="modal-dialog modal-dialog-centered">
                           <div class="modal-content">
                               <div class="modal-header bg-orange padding-up-5">
                                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal" ></button>
                               </div>
                               <form class="tablelist-form" autocomplete="off" [formGroup]="requestForm" (ngSubmit)="validateForm()">
                                <div class="modal-body">
                                    <input type="hidden" id="id-field" />
                                    <div class="row">
                                        <div class="col-lg-8">
                                            <div class="mb-3">
                                                <h3 class="fw-semibold"><span>Leave Type</span></h3>
                                                <input type="text" id="leavetype" name="leavetype"  class="form-control"formControlName="leavetype" required/>
                                                <div *ngIf="requestForm.get('leavetype')!.hasError('required') && requestForm.get('leavetype')!.touched" class="text-danger">
                                                    Please enter Leave Type.
                                                </div>
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-lg-4">
                                            <div class="mb-3">
                                                <h3 class="fw-semibold"><span>Eligible Leave</span></h3>
                                                <input type="number" id="eligibleleave" name="eligibleleave"  class="form-control " formControlName="eligibleleave" required>
                                                <div *ngIf="requestForm.get('eligibleleave')!.hasError('required') && requestForm.get('eligibleleave')!.touched" class="text-danger">
                                                    Please enter Eligible Leave.
                                                </div>
                                            </div>
                                        </div>
                                        <!--end col-->
                                    </div>
                                    <div class="mb-3" id="modal-id" >
                                        <label for="empid" class="fw-semibold">Type of Leave</label>
                                        <select class="form-select" aria-label="Default select example" required  id="Noofdays" name="Noofdays" #Noofdays formControlName="Noofdays" >
                                            <option value="-1">Select</option>
                                            <option *ngFor="let noofdays of listnodays"  value="{{noofdays.DATA_VALUE}}">{{noofdays.DATA_VALUE}}</option>
                                        </select>
                                        <div *ngIf="requestForm.get('Noofdays')!.hasError('required') && requestForm.get('Noofdays')!.touched" class="text-danger">
                                            Please select type of Leave.
                                        </div>
                                    </div>
                                                                                                  
                                    <div class="mb-3" id="modal-id">
                                        <label for="empid" class="fw-semibold">Company</label>
                                        <select class="form-select" aria-label="Default select example" required  id="modalcompany" name="modalcompany" #modalcompany formControlName="modalcompany">
                                            <option value="AL">All</option>
                                            <option  *ngFor="let Company of listCompany" value="{{Company.KEY_ID}}">
                                            {{Company.DATA_VALUE}}
                                        </option>
                                        </select>
                                        <div *ngIf="requestForm.get('modalcompany')!.hasError('required') && requestForm.get('modalcompany')!.touched" class="text-danger">
                                            Please select Company.
                                        </div>
                                    </div>
                                </div>   
                                    
                                    
                                <div class="modal-footer">
                                    <div class="hstack gap-2" *ngIf="!requestForm.valid">
                                        <button type="submit" class="btn btn-orange font-type text-white" [disabled]="requestForm.valid" id="validate-btn" (click)="validateForm()">Submit</button>
                                    </div>
                                    <div class="hstack gap-2 justify-content-center" *ngIf="requestForm.valid">
                                        <button type="button" class="btn btn-orange font-type text-white" id="add-btn" data-bs-target="#SaveModal" data-bs-toggle="modal"(click)="SaveNewPolicy()" >Submit</button>
                                    </div>
                                </div>
                            </form>
                           </div>
                       </div>
                   </div>                
                    <!-- End Add leave Model -->
